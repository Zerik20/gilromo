---
const logos = [
  { src: '/img/patrocinadores/Patrocinador1.png', alt: 'Patrocinador 1' },
  { src: '/img/patrocinadores/Patrocinador2.png', alt: 'Patrocinador 2' },
  { src: '/img/patrocinadores/Patrocinador3.png', alt: 'Patrocinador 3' },
  { src: '/img/patrocinadores/Patrocinador4.png', alt: 'Patrocinador 4' },
  { src: '/img/patrocinadores/Patrocinador5.png', alt: 'Patrocinador 5' },
  { src: '/img/patrocinadores/Patrocinador6.png', alt: 'Patrocinador 6' },
  { src: '/img/patrocinadores/Patrocinador7.png', alt: 'Patrocinador 7' },
];
---

<section class="w-full py-10">
  <h2 
    class="text-center text-3xl font-bold mb-10"
    data-aos="fade-up"
    data-aos-duration="800"
  >
    Aliados comerciales
  </h2>

  <!-- Carrusel infinito -->
  <div class="relative w-full overflow-hidden" data-aos="fade-up" data-aos-delay="100">
    <div class="marquee">
      <div class="marquee__track" style="--duration: 28s;">
        {logos.map((logo) => (
          <figure class="logo-cell" aria-label={logo.alt}>
            <img src={logo.src} alt={logo.alt} loading="lazy" decoding="async" />
          </figure>
        ))}
        {/* Duplicado para loop perfecto */}
        {logos.map((logo) => (
          <figure class="logo-cell" aria-label={logo.alt}>
            <img src={logo.src} alt={logo.alt} loading="lazy" decoding="async" />
          </figure>
        ))}
      </div>
    </div>
  </div>
</section>

<style>
  /* Contenedor con desvanecido lateral sutil */
  .marquee {
    position: relative;
    overflow: hidden;
    mask-image: linear-gradient(to right, transparent, black 8%, black 92%, transparent);
    -webkit-mask-image: linear-gradient(to right, transparent, black 8%, black 92%, transparent);
  }

  /* Pista: dos secuencias iguales → translateX(-50%) para loop perfecto */
  .marquee__track {
    display: inline-flex;
    align-items: center;
    gap: clamp(1.25rem, 5vw, 3rem);
    /* Pausar en hover */
    animation: marqueeScroll var(--duration, 28s) linear infinite;
    will-change: transform;
  }
  .marquee__track:hover { animation-play-state: paused; }

  /* Cada celda fija su alto; evita solapes en móvil y mantiene proporción */
  .logo-cell {
    flex: 0 0 auto;
    height: clamp(70px, 16vw, 130px); /* un poco más grandes que antes */
    width: clamp(140px, 28vw, 240px); /* ancho base para spacing uniforme */
    display: flex; align-items: center; justify-content: center;
  }
  .logo-cell img {
    height: 100%;
    width: auto;
    object-fit: contain;
    display: block;
    filter: drop-shadow(0 2px 8px rgba(0,0,0,.25));
  }

  @keyframes marqueeScroll {
    from { transform: translateX(0); }
    to   { transform: translateX(-50%); }
  }

  /* Accesibilidad: respetar reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .marquee__track { animation: none; }
  }
</style>

<script type="module">
  // (Opcional) Si usas AOS global, no necesitas nada más aquí.
  // Este carrusel no depende de JS; es 100% CSS y responsivo.
</script>
