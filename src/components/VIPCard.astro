---
export interface Tier {
  name: string;
  bullets: string[];
  original: string; // precio anterior (tachado)
  presale: string;  // ya no se usa, lo dejamos vacío por compatibilidad
  offer: string;    // precio actual
  badge: string;
  pillClass: string;
}

export interface Props {
  tiers?: Tier[];
  gateway?: string;
  aos?: string;
  aosDelay?: number;
}

const {
  tiers = [
    {
      name: "ACCESO GENERAL",
      bullets: ["Taller", "5 Conferencias", "Conferencia Sorpresa"],
      original: "$2,100.00 Mxn.",
      presale:  "", // sin preventa
      offer:    "$1,050.00 Mxn.", // NUEVO
      badge: "HOT SALE",
      pillClass: "bg-[#d6c29a] text-black",
    },
    {
      name: "ACCESO PLATINO",
      bullets: ["Taller", "5 Conferencias", "Conferencia Sorpresa", "Lugares Preferentes"],
      original: "$2,850.00 Mxn.",
      presale:  "", // sin preventa
      offer:    "$1,425.00 Mxn.", // NUEVO
      badge: "HOT SALE",
      pillClass: "bg-zinc-300 text-black",
    },
    {
      name: "ACCESO VIP",
      bullets: ["Taller", "5 Conferencias", "Conferencia Sorpresa", "Lugares Preferentes", "Convivencia con Jorge Serratos", "Cena (Tres tiempos)"],
      original: "$4,750.00 Mxn.",
      presale:  "", // sin preventa
      offer:    "$3,200.00 Mxn.", // NUEVO
      badge: "VIP",
      pillClass: "bg-red-600/95 text-white",
    },
  ],
  gateway = "#contacto-form",
  aos = "flip-left",
  aosDelay = 0,
} = Astro.props;
---

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
  {tiers.map((t, idx) => (
    <article
      class="rounded-3xl bg-black/50 ring-1 ring-white/10 p-5 sm:p-6 shadow-[0_18px_50px_rgba(0,0,0,.45)] flex flex-col max-w-[420px] mx-auto"
      data-aos={aos}
      data-aos-delay={String(aosDelay + idx * 100)}
    >
      <h3 class="text-center text-white font-extrabold tracking-[.2em] text-sm">{t.name}</h3>

      <div class={`mt-4 rounded-2xl ${t.pillClass} px-5 py-4 shadow-inner`}>
        <ul class="text-sm space-y-2">
          {t.bullets.map((b) => (
            <li class="flex items-start gap-2">
              <span class={`mt-1 block h-1.5 w-1.5 rounded-full ${t.pillClass.includes('text-white') ? 'bg-white/70' : 'bg-black/40'}`}></span>
              <span class={t.pillClass.includes("text-white") ? "text-white" : "text-black"}>{b}</span>
            </li>
          ))}
        </ul>
      </div>

      <!-- PRECIOS: solo original tachado + precio actual -->
      <div class="mt-4 text-center">
        <p class="text-white/70 line-through">{t.original}</p>
        <p class="mt-1 font-extrabold text-[clamp(1.15rem,2.2vw,1.35rem)] text-red-400">
          Precio <span class="text-white">{t.offer}</span>
        </p>
      </div>

      <div class="mt-3 flex items-center justify-center gap-2">
        <span class="inline-flex items-center rounded-full bg-red-600/90 text-white text-[10px] font-bold px-2 py-1">
          {t.badge}
        </span>
      </div>

      <div class="mt-5">
        <a
          href={gateway}
          class="w-full inline-flex items-center justify-center rounded-full
                 bg-[linear-gradient(180deg,#e7c65a_0%,#d4af37_50%,#b9972c_100%)]
                 text-black font-extrabold uppercase tracking-wide
                 px-5 py-2.5 text-sm ring-2 ring-gold-300 hover:scale-[1.02] active:scale-[.98] transition"
        >
          Comprar boletos
        </a>
        <p class="mt-2 text-center text-xs text-white/60">Solicita tu código de descuento.</p>
      </div>
    </article>
  ))}
</div>
